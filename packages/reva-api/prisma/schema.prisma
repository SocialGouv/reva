generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Certification {
  id          String    @id @db.Uuid @default(dbgenerated("uuid_generate_v4()"))
  label       String    @db.VarChar(255)
  acronym     String    @db.VarChar(255)
  level       Int       
  activities  String?
  activityArea      String? @map("activity_area")
  accessibleJobType String? @map("accessible_job_type")
  abilities   String?
  slug        String
  description String?
  isActive    Boolean   @default(true) @map("is_active")
  rncpId      String    @unique @map("rncp_id") @db.VarChar(255)
  romes       RomesOnCertifications[]
  createdAt   DateTime  @db.Timestamptz(6) @default(now()) @map("created_at")
  updatedAt   DateTime? @db.Timestamptz(6) @map("updated_at")

  @@map("certification")
}

model Profession {
  id          String    @id @db.Uuid @default(dbgenerated("uuid_generate_v4()"))
  label       String    @db.VarChar(255)
  slug        String
  description String?
  romeId      String    @db.Uuid @map("rome_id")
  rome Rome? @relation(fields: [romeId], references: [id])

  createdAt   DateTime  @db.Timestamptz(6) @default(now()) @map("created_at")
  updatedAt   DateTime? @db.Timestamptz(6) @map("updated_at")

  @@map("profession")
}

model Rome {
  id          String    @id @db.Uuid @default(dbgenerated("uuid_generate_v4()"))
  code        String    @unique @db.VarChar(255)
  label       String    @db.VarChar(255)
  slug        String    @db.VarChar(255)
  url         String    @db.VarChar(255)
  profession  Profession[]
  certifications RomesOnCertifications[]
  isActive    Boolean   @default(false) @map("is_active")
  createdAt   DateTime  @db.Timestamptz(6) @default(now()) @map("created_at")
  updatedAt   DateTime? @db.Timestamptz(6) @map("updated_at")

  @@map("rome")
}


model RomesOnCertifications {
  certification       Certification @relation(fields: [certificationId], references: [id])
  certificationId     String        @db.Uuid  @map("certification_id")
  rome                Rome          @relation(fields: [romeId], references: [id])
  romeId              String        @db.Uuid  @map("rome_id")
  createdAt   DateTime  @db.Timestamptz(6) @default(now()) @map("created_at")
  updatedAt   DateTime? @db.Timestamptz(6) @map("updated_at")

  @@id([certificationId, romeId])
  @@map("rome_certification")
}